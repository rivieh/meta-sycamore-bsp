// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
 /*
  * Copyright 2022 RIVIEH, INC.
  */

#include "freescale/imx8mn-evk.dts"

/ {
	model = "NXP i.MX8MNano DDR3L EVK board Conncected to Rivieh 550p2V2 Board";
	
	sound-tas5805 {
		compatible = "simple-audio-card";
		simple-audio-card,name = "tas5805m-amp";
		simple-audio-card,format = "i2s";
		simple-audio-card,bitclock-master = <&dailink0_master>;
		simple-audio-card,frame-master = <&dailink0_master>;
		status = "okay";
		
		dailink0_master: simple-audio-card,cpu {
			sound-dai = <&sai5 0>;
		};
		simple-audio-card,codec {
			sound-dai = <&tas5805m>;
		};
	};
	
	/*TODO: review*/
	reg_vddext_3v3: regulator-vddext {
		compatible = "regulator-fixed";
		regulator-name = "VDDEXT_3V3";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
	};
};

&sai5{
	#sound-dai-cells = <1>;
	assigned-clock-rates = <24576000>;
	status = "okay";
};

&i2c3 {
	tas5805m: tas5805m@2d {
		#sound-dai-cells = <0>;
		compatible = "ti,tas5805m";
		reg = <0x2D>;
		status = "okay";
	};
	
        is31fl3246: is31fl3246@30 {
		#address-cells = <1>;
		#size-cells = <0>;
		compatible = "issi,is31fl3246";
		reg = <0x30>;
		led1 {
		        label = "green0";
		        linux,default-trigger = "none";
		        reg = <1>;
		};


		led2 {
		        label = "red0";
		        linux,default-trigger = "none";
		        reg = <2>;
		};
		
		led3 {
		        label = "blue0";
		        linux,default-trigger = "none";
		        reg = <3>;
		};

		led4 {
		        label = "green1";
		        linux,default-trigger = "none";
		        reg = <4>;
		};


		led5 {
		        label = "red1";
		        linux,default-trigger = "none";
		        reg = <5>;
		};

		led6 {
		        label = "blue1";
		        linux,default-trigger = "none";
		        reg = <6>;
		};
		
		led7 {
		        label = "green2";
		        linux,default-trigger = "none";
		        reg = <7>;
		};


		led8 {
		        label = "red2";
		        linux,default-trigger = "none";
		        reg = <8>;
		};

		led9 {
		        label = "blue2";
		        linux,default-trigger = "none";
		        reg = <9>;
		};
		
		led10 {
		        label = "green3";
		        linux,default-trigger = "none";
		        reg = <10>;
		};

		led11 {
		        label = "red3";
		        linux,default-trigger = "none";
		        reg = <11>;
		};

		led12 {
		        label = "blue3";
		        linux,default-trigger = "none";
		        reg = <12>;
		};

		led13 {
		        label = "green4";
		        linux,default-trigger = "none";
		        reg = <13>;
		};


		led14 {
		        label = "red4";
		        linux,default-trigger = "none";
		        reg = <14>;
		};

		led15 {
		        label = "blue4";
		        linux,default-trigger = "none";
		        reg = <15>;
		};
       };

};

&ecspi2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ecspi2>;
	status = "okay";
};


&iomuxc {
	pinctrl_ecspi2: spi2grp {
	fsl,pins = <
		MX8MN_IOMUXC_ECSPI2_SCLK_ECSPI2_SCLK		0x1c4
		MX8MN_IOMUXC_ECSPI2_SS0_ECSPI2_SS0		0x84
		MX8MN_IOMUXC_ECSPI2_MISO_ECSPI2_MISO		0x84
		MX8MN_IOMUXC_ECSPI2_MOSI_ECSPI2_MOSI		0x84
		>;
	};
	
	pinctrl_pdm: pdmgrp {
		fsl,pins = <
			/*MX8MN_IOMUXC_SAI5_MCLK_SAI5_MCLK	0xd6*/
			MX8MN_IOMUXC_SAI5_RXC_PDM_CLK		0xd6
			MX8MN_IOMUXC_SAI5_RXFS_SAI5_RX_SYNC	0xd6
			MX8MN_IOMUXC_SAI5_RXD0_PDM_BIT_STREAM0	0xd6
			MX8MN_IOMUXC_SAI5_RXD1_PDM_BIT_STREAM1	0xd6
			/* MX8MN_IOMUXC_SAI5_RXD2_PDM_BIT_STREAM2	0xd6 */
			/* MX8MN_IOMUXC_SAI5_RXD3_PDM_BIT_STREAM3	0xd6 */
		>;
	};


	pinctrl_sai5: sai5grp {
		fsl,pins = <
			MX8MN_IOMUXC_SAI5_MCLK_SAI5_MCLK	0xd6
			/*MX8MN_IOMUXC_SAI5_RXC_SAI5_RX_BCLK	0xd6
			MX8MN_IOMUXC_SAI5_RXFS_SAI5_RX_SYNC	0xd6
			MX8MN_IOMUXC_SAI5_RXD0_SAI5_RX_DATA0	0xd6
			MX8MN_IOMUXC_SAI5_RXD1_SAI5_RX_DATA1    0xd6
			MX8MN_IOMUXC_SAI5_RXD2_SAI5_RX_DATA2    0xd6
			MX8MN_IOMUXC_SAI5_RXD3_SAI5_RX_DATA3    0xd6*/
			
			MX8MN_IOMUXC_SAI5_RXD2_SAI5_TX_BCLK 	0xd6
			MX8MN_IOMUXC_SAI5_RXD3_SAI5_TX_DATA0	0xd6
			MX8MN_IOMUXC_ECSPI1_SS0_SAI5_TX_SYNC	0xd6
		>;
	};
	
	
};

&uart3 {
	status = "disabled";
};


&aips4 {
	/delete-node/ display-subsystem;
};

/delete-node/ &adv_bridge;
/delete-node/ &gpu;
/delete-node/ &lcdif;
/delete-node/ &mipi_dsi;
